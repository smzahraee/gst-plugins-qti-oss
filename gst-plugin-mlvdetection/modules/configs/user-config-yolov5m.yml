# Copyright (c) 2021 Qualcomm Innovation Center, Inc. All rights reserved.
#  
# Redistribution and use in source and binary forms, with or without
# modification, are permitted (subject to the limitations in the
# disclaimer below) provided that the following conditions are met:
#  
#     * Redistributions of source code must retain the above copyright
#       notice, this list of conditions and the following disclaimer.
#  
#     * Redistributions in binary form must reproduce the above
#       copyright notice, this list of conditions and the following
#       disclaimer in the documentation and/or other materials provided
#       with the distribution.
#  
#     * Neither the name of Qualcomm Innovation Center, Inc. nor the names of its
#       contributors may be used to endorse or promote products derived
#       from this software without specific prior written permission.
#  
# NO EXPRESS OR IMPLIED LICENSES TO ANY PARTY'S PATENT RIGHTS ARE
# GRANTED BY THIS LICENSE. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT
# HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED
# WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
# MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
# IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
# ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
# DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
# GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
# INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER
# IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
# OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN
# IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

# A config for yolov5 model
###################################################################
#                   Architecture Parameters
##################################################################
model-architecture : "yolov5"
# Options for modelname :
# "resnet34ssd"
# "mv1ssd"
# "retinanet"
# "yolov3"
# "yolov4"
# "yolov5"
# "resnet18ssd"
# "retinaface"
num-classes : 80
num-landmark : 0
layout : "NAHWC"
# Options for layout :
# "NCD"
# "NDC"
# "NHWC"
# "NCHW"
# "NAWHC"
bbox-output-list : ['524', '544', '564']
score-output-list : []
landmark-output-list : []
do-class-specific-nms : False
do-softmax : False
background-class-idx : 0
map-classes-coco-81-to-91 : False

###################################################################
#                   I/O Configuration
##################################################################
model-output-dir : "/data/yolo-output"
model-output-extension : ".bin"
model-num-outputs : 1
abp-output-dir : "/data/yolo-abp-output-test"
prior-filepath : ""

# CPU or AIC
model-run-time : "AIC"

# Required if model-run-time is AIC
aic-model-info:
        model-descriptor-filepath : "/data/yolov5m/networkdesc.bin"
        # 1 = "On",
        # 2 = "Quantize",
        # 3 = "Transpose",
        # 4 = "Convert",
        # 5 = "Off",
        # Others : "Invalid"

        skip-transform-value      : 4
        model-output-suffix       : "-activation-0-inf-"

# Required if model-run-time is CPU
cpu-model-info:
        model-output-suffix : ""
        model-outputs :
                # Array of names
                names   : ["524" , "544", "564"]
                # 2D Array of shapes
                shapes  :
                         - [1,3,80,48,85]
                         - [1,3,40,24,85]
                         - [1,3,20,12,85]
                # Supported types "float", "float16", "int8Q", "uint8Q", "int16Q", "int32Q", "int32I", "int64I", "bool"
                types   : ["uint8Q","uint8Q","uint8Q"]

                # offsets and scales are required for ["int8Q", "uint8Q", "int16Q", "int32Q"] types.
                # Array of offsets
                offsets : [0,0,0]
                # Array of scales
                scales  : [1,1,1]

        # Model input config
        # All are parallel arrays of input config
        model-inputs:
                # Array of input names
                names  : ["images"]
                # 2D Array of Shapes
                shapes :
                        - [1, 640, 384, 3]

##################################################################
#                   Thresholding Parameters
##################################################################
score-threshold : 0.3
# score threshold to be used in classwise and classagnostic abp-nms
nms-threshold : 0.65
# iou threshold to used in nms
max-detections-image : 100
# overall threshold on one data point/ image
max-boxes-class : 100
# maxBoxesPerClass may be limited to be used with class specific abp-nms
